<!DOCTYPE html>
<html>
	<head lang="en">
		<meta charset="utf-8" />
		<title>个人信息</title>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/mygrxx.css" />
		<script src="js/fun.js" type="text/javascript" charset="utf-8"></script>
		<link rel="stylesheet" type="text/css" href="https://www.huangwx.cn/css/sweetalert.css">
		<script type="text/javascript" src="https://www.huangwx.cn/js/sweetalert-dev.js"></script>
	</head>
	<body>
		<!------------------------------head------------------------------>
		<div class="head ding" style="">
			<div class="wrapper clearfix">
				<div class="clearfix" id="top">
					<h1 class="fls"><a href="index.html"><img src="img/logo.png"/></a></h1>
					<div class="fh clearfix" id="top1">
						<p class="fl">
							<a href="mygrxx.html" id="login"></a>
							<a href="login.html" id="reg">退出登录</a>
						</p>
						<form >

						</form>
						<div class="btn fl clearfix">
							<a href="mygrxx.html"><img src="img/grzx.png"/></a>
							<a href="#" class="er1"><img src="img/ewm.png"/></a>
							<a href="cart.html"><img src="img/gwc.png"/></a>
							<p><a href="#"><img src="img/smewm.png"/></a></p>
						</div>
					</div>
				</div>
				<ul class="clearfix" id="bott" style="margin-top: -15px">

					<li><a href="index.html" style="font-weight: bold;font-size: 18px">首页</a></li>
					<li>
						<a  style="font-weight: 500;font-size: 18px">所有商品</a>
						<div class="sList">
							<div class="wrapper  clearfix">
								<a href="flowerDer.html?classify=1">
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/Tit1.png"/></dt>
										<dd style="font-weight: bold;font-size: 15px;color: #563D7C">餐厅凳椅</dd>
									</dl>
								</a>
								<a href="flowerDer.html?classify=2">
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/Tit2.png"/></dt>
										<dd style="font-weight: bold;font-size: 15px;color: #563D7C">卧室储物</dd>
									</dl>
								</a>
								<a href="perfume.html?classify=3">
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/Tit3.png"/></dt>
										<dd style="font-weight: bold;font-size: 15px;color: #563D7C">居家软床</dd>
									</dl>
								</a>
								<a href="perfume.html?classify=4">
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/Tit4.png"/></dt>
										<dd style="font-weight: bold;font-size: 15px;color: #563D7C">布艺沙发</dd>
									</dl>
								</a>
								<a href="idea.html?classify=5">
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/Tit5.png"/></dt>
										<dd style="font-weight: bold;font-size: 15px;color: #563D7C">装饰边桌</dd>
									</dl>
								</a>
							</div>
						</div>
					</li>
					<li>
						<a href="flowerDer.html?classify=1" style="font-weight: 500;font-size: 18px">餐厅凳椅</a>
						<div class="sList">
							<div class="wrapper  clearfix">
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/1_1_1.png"/></dt>
										<dd>当季新品一</dd>
									</dl>
								</a>
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/1_2_1.png"/></dt>
										<dd>当季新品二</dd>
									</dl>
								</a>
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/1_3_1.png"/></dt>
										<dd>当季新品三</dd>
									</dl>
								</a>
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/1_4_1.png"/></dt>
										<dd>当季新品四</dd>
									</dl>
								</a>
							</div>
						</div>
					</li>
					<li>
						<a href="flowerDer.html?classify=2" style="font-weight: 500;font-size: 18px">卧室储物</a>
						<div class="sList">
							<div class="wrapper  clearfix">
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/2_1_1.PNG"/></dt>
										<dd>当季新品一</dd>
									</dl>
								</a>
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/2_2_1.PNG"/></dt>
										<dd>当季新品二</dd>
									</dl>
								</a>
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/2_3_1.PNG"/></dt>
										<dd>当季新品三</dd>
									</dl>
								</a>
								<a>
									<dl>
										<dt><img style="width: auto;height: 150px;" src="img/2_4_1.PNG"/></dt>
										<dd>当季新品四</dd>
									</dl>
								</a>
							</div>
						</div>
					</li>
					<li><a href="perfume.html?classify=3" style="font-weight: 500;font-size: 18px">居家软床</a></li>
					<li><a href="perfume.html?classify=4" style="font-weight: 500;font-size: 18px">布艺沙发</a></li>
					<li><a href="idea.html?classify=5" style="font-weight: 500;font-size: 18px">装饰边桌</a></li>
				</ul>
			</div>
		</div>
		<!------------------------------idea------------------------------>
		<div class="address mt">
			<div class="wrapper clearfix">
				<a href="index.html" class="fl" style="font-size: 14px;font-weight: 700">首页</a>
				<span>/</span>
				<a href="mygxin.html" class="fl" style="font-size: 14px;font-weight: 700">账户管理</a>
				<span>/</span>
				<a href="mygxin.html" class="on" style="font-size: 14px;font-weight: 700">个人信息</a>
			</div>
		</div>
		
		<!------------------------------Bott------------------------------>
		<div class="Bott">
			<div class="wrapper clearfix">
				<div class="zuo fl">
					<h3>
						<a href="#"><img id="img1" style="width: 80px;height: 80px;border-radius:45px" src="./img/QQ.jpg"/></a>
						<p class="clearfix"><span class="fl" id="name1" style="font-size: 20px;color: #563D7C;float: none;"></span></p>
					</h3>
					<div>
						<h4 style="font-weight: bold;color:#563D7C;font-size: 16px;">我的交易</h4>
						<ul>
							<li><a href="cart.html" style="font-size: 14px;color:#563D7C ">我的购物车</a></li>
							<li><a href="myorderq.html">我的订单</a></li>
							<li><a href="myprod.html">评价晒单</a></li>
						</ul>
						<h4 style="font-weight: bold;color:#563D7C;font-size: 16px;">个人中心</h4>
						<ul>
							<li><a href="mygxin.html">我的中心</a></li>
							<li><a href="address.html">地址管理</a></li>
						</ul>
						<h4 style="font-weight: bold;color:#563D7C;font-size: 16px;">账户管理</h4>
						<ul>
							<li  class="on"><a href="mygrxx.html" style="color:darkseagreen;font-weight: bold;" >个人信息</a></li>
							<li><a href="remima.html">修改密码</a></li>
						</ul>
					</div>
				</div>
				<div class="you fl">
					<h2 style="font-weight: 600;color: #563D7C;">个人信息</h2>
					<div class="gxin">
						<div class="tx"><a href="#"><img id="img2" style="width: 96px;height: 96px;border-radius:48px" src="img/QQ.jpg"/><p id="avatar" style="color: #563D7C;">修改头像</p></a></div>
						<div class="xx">
							<h3 class="clearfix"><strong class="fl" style="font-weight: 600;color: #563D7C;">基础资料</strong><button type="button" class="info" id="edit1" style="font-size: 13px;">修改</button></h3>
							<div style="font-weight: 600;font-size: 15px;color: #563D7C;">昵称:<a id="name2" style="color: black">yang</a></div>
							<div style="font-weight: 600;font-size: 15px;color: #563D7C;" >邮箱:<a id="email" style="color: black">yang</a></div>
							<div style="font-weight: 600;font-size: 15px;color: #563D7C;" >年龄:<a id="age" style="color: black">yang</a></div>
							<!--<h3 style="font-weight: 600;color: #563D7C;">高级设置</h3>-->
							<!--&lt;!&ndash;<div><span class="fl">银行卡</span><a href="#" class="fr">管理</a></div>&ndash;&gt;-->
							<!--<div><span class="fl">账号地区：中国</span><button type="button" class="info" id="edit2" style="font-size: 13px;" >修改</button></div>-->
						</div>
					</div>			
				</div>
			</div>
		</div>
		<!--遮罩-->
		<div class="mask"></div>
		<!--编辑弹框-->
		<div class="bj">
			<div class="clearfix"><a href="#" class="fr gb"><img src="img/icon4.png"/></a></div>
			<h3 style="font-weight: 600;color: #563D7C;">编辑基础资料</h3>
			<form action="#" method="get">
				<p><label>昵称:</label><input type="text" id="inp1"  /></p>
				<p><label>邮箱:</label><input type="text"  id="inp2" value="yang"/></p>
				<p><label>年龄:</label><input type="text" id="inp3" style="width: 252px;height: 42px;" /> </p>
				<div class="bc">
					<input type="button" id="save" value="保存"  />
					<input type="button" value="取消" />
				</div>
			</form>
		</div>
		<!--修改头像-->
		<div class="avatar">
			<div class="clearfix"><a href="#" class="fr gb"><img src="img/icon4.png"/></a></div>
			<h3>修改头像</h3>
			<form action="#" method="get" style="display: flex;justify-content: center">

				<div style="position: relative" >
					<div>
						<img id="img3" src="img/QQ.jpg" style="width: 150px;height: 150px;border-radius:75px">
					</div>
					<div class="input-file">上传头像</div>
					<input class="input1" type="file" value="上传头像"  id="img_get" onchange="xx()"/>

				</div>

				<!--<p>jpg或png，大小不超过2M</p>-->
				<!--<input type="submit" value="提交" />-->
			</form>
		</div>
		
		<!--返回顶部-->
		<div class="gotop">
			<a href="cart.html">
			<dl>
				<dt><img src="img/gt1.png"/></dt>
				<dd>去购<br />物车</dd>
			</dl>
			</a>
			<a href="#" class="dh">
			<dl>
				<dt><img src="img/gt2.png"/></dt>
				<dd>联系<br />客服</dd>
			</dl>
			</a>
			<a href="mygxin.html">
			<dl>
				<dt><img src="img/gt3.png"/></dt>
				<dd>个人<br />中心</dd>
			</dl>
			</a>
			<a href="#" class="toptop" style="display: none">
			<dl>
				<dt><img src="img/gt4.png"/></dt>
				<dd>返回<br />顶部</dd>
			</dl>
			</a>
			<p>400-800-8200</p>
		</div>
		<!--footer-->
		<div class="footer">

			<p class="dibu">企鹅家居&copy;2018-2020公司版权所有 京ICP备080100-44备0000111000号<br />
				违法和不良信息举报电话：400-800-8200，本网站所列数据，除特殊说明，均属原创，侵权必究！</p>
		</div>
		<script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/public.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/user.js" type="text/javascript" charset="utf-8"></script>
	</body>


	<script>
        var EmailTest =/^\w+((.\w+)|(-\w+))@[A-Za-z0-9]+((.|-)[A-Za-z0-9]+).[A-Za-z0-9]+$/;
        var NameTest = /^[A-Za-z0-9]{1,12}$/;
        // var NameTest =/^[\u4E00-\u9FA5A-Za-z0-9]{1,12}$/;
        var AgeTest =/^(?:[1-9][0-9]?|1[01][0-9]|120)$/;

        function xx() {
            var path= document.getElementById("img_get").files[0].name;
            var URL = 'img/';
            // console.log(path);
            // console.log(URL+path);
            setCookie("img_path",URL+path);
            var obj1 = document.getElementById("img1");
            var obj2 = document.getElementById("img2");
            var obj3 = document.getElementById("img3");

            obj1.setAttribute("src",URL+path);
            obj2.setAttribute("src",URL+path);
            obj3.setAttribute("src",URL+path);
        }

        var userid = getCookie('id');
        var useremail = getCookie('email');
        var username = getCookie('name');
        var userage = getCookie('age');
        var path = getCookie('img_path');

        var obj1 = document.getElementById("img1");
        var obj2 = document.getElementById("img2");
        var obj3 = document.getElementById("img3");

        obj1.setAttribute("src",path);
        obj2.setAttribute("src",path);
        obj3.setAttribute("src",path);
		// var path = getCookie('img_path');
		// var URL = 'img/';
		//  console.log(path);




        $(function () {
            $("#save").click(function () {
                var input1 = $("#inp1").val();
                var input3 = $("#inp3").val();

                if(input1 ===""|| input3 ===""){
                    swal("信息输入不完整！");
                    return;
				}
				if(!NameTest.test(input1)){
                    swal("Name格式有问题！");
                    return;
				}
				if(!AgeTest.test(input3)){
                    swal("Age输入格式有问题！");
                    return;
				}
				$.ajax({
                    type:"POST",
                    contentType:"application/x-www-form-urlencoded",
                    url:"http://localhost:8090/user/change",
                    data:{
                        "user_id":userid,
						"name":input1,
						"email":useremail,
                        "age":input3
                    },
					success:function (data) {
                        swal("更改成功！");
                        setCookie('name',input1);
                        setCookie('age',input3);
                        $("#name1").html(input1);
                        $("#name2").html(input1);
                        $("#age").html(input3);
						return;
                    },
					error:function (data) {
                        swal("更改失败！");
                        console.log(data);
                        return;

                    }
                })
            })
        })

        $(function () {
            $("#name1").html(username);
            $("#name2").html(username);
            $("#email").html(useremail);
            $("#age").html(userage);
            $("#inp2").val(useremail);

        });

	</script>
</html>
